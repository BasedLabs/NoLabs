name: NoLabs

on:
  push:
    branches: feature/cicd
    #paths:
    #  - 'build/**'
    #  - 'client/**'
    #  - 'frontend/**'
    #  - 'nolabs/**'
    #  - 'build/**'

jobs:
  nolabs-build:
    permissions:
      contents: read
      packages: write

    uses: ./.github/workflows/build-docker.yaml
    with:
      microservice_name: "nolabs"

  nolabs-push:
    needs: nolabs-build

    permissions:
      contents: read
      packages: write

    uses: ./.github/workflows/push-docker.yaml
    with:
      microservice_name: "nolabs"
      push: ${{ github.repository == 'BasedLabs/NoLabs' }}